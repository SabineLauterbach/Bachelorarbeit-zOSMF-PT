\chapter{Realisierung}\label{ch:realisierung}
In diesem Kapitel wird beschrieben, wie die Aufgabe dieser Arbeit gelöst wurde.
Dazu wird nach der im Kapitel \ref{ch:vorgehensweise} beschriebenen Reihenfolge, der Arbeitsschritte vorgegangen.
Es ist nochmal zu erwähnen, dass zunächst die Provisionierung einer CICS Instanz untersucht wird.
Danach wird in weiteren Schritten zuerst eine Db2 Datenbank und schließlich MQ Queues dem Bereitstellungsprozess hinzugefügt.

\section{Testplex}
Vor Beginn der eigentlichen Untersuchung mussten zunächst alle benötigten Rechte beantragt werden.
Hierzu zählen unter anderem die Rechte für die Nutzung des Testplexes, die Nutzung von z/OSMF und z/OSPT und die Rechte für die Templateverwaltung innerhalb von z/OSMF.
Außerdem war es auf dem Testplex möglich die Rechte für das Erstellen der CICS Dateien, das Recht um ein CICS starten zu dürfen und die Rechte für die Administration von Db2 und MQ einer persönlichen UserID zu geben.
Dies stellt kein Problem da, weil es sich bei dem Testplex um eine reine Systemtestumgebung handelt.
Außerdem benötigt das IBM Cloud and Management for z/OS lesenden Zugriff auf den Speicherpfad der Template Dateien.
Schließlich konnte mit dem ersten Versuch ein bei der Installation von z/OSMF mittgeliefertes minimales CICS Template zu provisionieren begonnen werden.

\subsection{IBM Standard CICS Template}
Trotz der Vorteile durch die Weboberfläche von z/OSMF wurde zunächst auf z/OSPT gesetzt.
Diese Entscheidung fiel auf Grund der höheren Flexibilität, durch Images.
Da es sich um ein mitgeliefertes Template handelt, sind alle benötigten Workflow Definitions Dateien und Template Dateien vorhanden.
Somit konnte der Konsolenbefehl `zospt build` auf dieses Template durchgeführt werden.
Dadurch sollte ein Image erzeugt werden.
Jedoch zeigte sich ein weiterer Nachteil des Kommandozeileninterfaces, es ist nicht möglich Templates eine Domain und einen Tenant zuzuweisen.
Dies hatte zur Folge das der Befehl `zospt build` fehlschlug.
Zusätzlich führte es dazu, dass für alle folgenden Aufgaben z/OSMF genutzt wird.

Das z/OSMF auf die Template und Workflow Dateien zugreifen kann, sind diese in einem Unix Dateisystem auf dem Großrechner gespeichert.
Das Template konnte dann ohne weitere Probleme in die Software Services aufgenommen werden.
Dabei wurden ihm eine Domain und ein Tenant zugewiesen.
Bevor das Template provisioniert werden kann, müssen Änderungen in der Eingabevariablen Datei vorgenommen werden.
Dazu mussten die Werte, der in Tabelle \ref{tab:cgsvars} genannten Variablen angepasst werden.
Die Kurzbeschreibungen und die Beschreibungen aller Variablen, die im Standard Template vorhanden sind, ist in \cite{IBM.2019} zu finden.
\begin{table}
\centering
\begin{tabularx}{\textwidth}{X|X}
Variablenname & Kurzbeschreibung \\
\hline
DFH\_REGION\_SEC & Legt fest, ob für das CICS Sicherheit im Allgemeinen aktiviert ist. \\
\hline
DFH\_REGION\_SECPRFX & Wenn DFH\_REGION\_SEC gesetzt ist, legt den Namen Perfix bei Authentificationanfragen für Ressourcen fest. \\
\hline
DFH\_REGION\_APPLID & Applikations ID der zu provisionierenden CICS Instance. \\
\hline
DFH\_LE\_HLQ & High-level qualifier\footnote{Erste Zeichen eines Dateinames, wird zum Filtern genutzt} für die Sprachumgebung\footnote{Grundeinstellungen der Programmiersprachen COBOL, PL1 und C. Mitgelieferte IBM Grundmodule} \\
\hline
DFH\_REGION\_HLQ & High-level qualifier für die CICS Dateien.\\
\hline
DFH\_REGION\_LOGSTREAM & Legt fest, wie die Log Dateien für das provisionierte CICS erstellt werden sollen. \\
\hline
DFH\_STC\_ID & User ID mit dem die CICS Instanz startet. \\
\hline
DFH\_REGION\_DFLTUSER & Default User ID für das CICS. \\
\hline
DFH\_REGION\_VTAMNODE & Name des VTAM Knotens, wenn das CICS hochfährt. \\
\hline
DFH\_REGION\_MEMLIMIT & Dem CICS maximal zur Verfügung stehender Speicherplatz. \\
\hline
DFH\_ZOS\_PROCLIB & Datei auf dem Großrechner, die den Job enthält, der für das Erzeugen der CICS Instanz zuständig ist. \\
\hline
DFH\_ZOS\_VSAM\_VOLUME & Speichersystem auf welchem die Dateien gespeichert werden sollen. Entscheidung kann auch an das System abgeben werden. \\
\hline
DFH\_CICS\_USSHOME & Installationspfad des Unix-Subsystems \\
\hline
DFH\_CICS\_HLQ & High-level qualifier von dem CICS Installationsort. \\
\end{tabularx}
\caption{Zu verändernde Variablen im minimalen CICS Template}
\label{tab:cgsvars}
\end{table}
Das diese Änderungungen greifen, muss das Template aktualisiert werden.
Dies ist in der Oberfläche per Knopfdruck durchgeführt worden.

Als nächster Schritt wurde ein Testlauf und somit ein erster Versuch das Template zu provisionieren durchgeführt.
Hierbei tratt beim ersten Step, der einen Job starten wollte, ein Fehler auf.
Nämlich um einen Rechte Verstoß bezüglich des Jobnames.
Bei der DATEV eG benötigt eine User ID die Rechte um Jobs mit bestimmten Namen starten zu dürfen.
Da im Template von der IBM vorgeschlagene Jobnamen verwendet werden, kommt es zum Verstoß.
Um diese Problem zu Lösen wurden die Jobnamen innerhalb des gesamten Templates an DATEV eG Standards angepasst.
Nachdem das Template aktualisiert wurde, wurde erneut versucht zu provisionieren.
Dabei stellte sich heraus, dass der Befehl um ein CICS zu starten innerhalb der DATEV eG einen weiteren Parameter benötigt.
Dieser wurde hinzugefügt und danach funktionierte das Provisionieren und alle definierten Aktionen des minimalen IBM Standard CICS Templates.

\subsubsection{DATEV eG spezifischen CICS Template}
Nachdem das minimale IBM Standard CICS Template funktionsfähig war und erste Erfahrungen mit z/OSMF gesammelt wurden, wurde ein allgemeines mitgeliefertes Template untersucht.
Wie in der Tabelle \ref{vglTemps} dargestellt ist, ist dieses Template mit insgesamt 76 verwendeten Dateien sehr umfangreich.
Zu diesen Dateien zählen alle, die direkt mit dem Template in Verbindung stehen.
Das Template beinhaltet nicht nur die Möglichkeit verschiedene CICS Typen zu provisioneren, sondern auch ob dies mit Scripten oder mit der REST-Api geschieht.
Dadurch verliert das Template an Übersichtlichkeit.
Zusätzlich kommt am ende bei der Provisionierung keine CICS Instanz heraus, die einer DATEV eG spezifischen Instanz entspricht.
Auf Grund dessen wurden alle für ein DATEV eG spezifischen CICS nicht notwendigen Dateien entfernt.
Wie in der Tabelle \ref{vglTemps} zu sehen ist, hatte das unter anderem die Löschung von knapp der Hälfte der Dateien zur Folge.
Des weiteren wurden auch viele nicht benötigte Variablen und Steps entfernt.
Dadurch schrumpft die provision.xml um circa ein Drittel.
Zusammenfassend lässt sich sagen, dass das Template an Übersichtlichkeit gewonnen hat.

Anschließend wurden die 


\section{Entwicklungsumgebung}

\section{Nutzwertanalyse}
